# MikroTik VPN Auto Setup

–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ OpenVPN –∏ WireGuard —Å–µ—Ä–≤–µ—Ä–æ–≤ –Ω–∞ MikroTik RouterOS 7.x

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **OpenVPN**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, 4 —Å–µ—Ä–≤–µ—Ä–∞ (TCP/UDP –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 80, 1194)
- **WireGuard**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ IP –∞–¥—Ä–µ—Å–∞–º–∏
- **Firewall**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
- **IP Pools**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—É–ª–æ–≤ –∞–¥—Ä–µ—Å–æ–≤
- **PPP Profiles**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- MikroTik RouterOS 7.x (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å –Ω–∞ 7.18)
- IP –∞–¥—Ä–µ—Å –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ `ether1`
- –ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## üîß –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (OpenVPN + WireGuard)
```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª MikroTik:
```

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤–µ—Å—å –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ `complete-vpn-setup.rsc`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –¢–æ–ª—å–∫–æ OpenVPN
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞:
```
- `ovpn-cleanup.rsc` - –æ—á–∏—Å—Ç–∫–∞
- `ovpn-setup.rsc` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ OpenVPN

### –í–∞—Ä–∏–∞–Ω—Ç 3: –¢–æ–ª—å–∫–æ WireGuard
```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞:
```
- `wireguard-setup.rsc` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ WireGuard

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
mikrotik-vpn-setup/
‚îú‚îÄ‚îÄ complete-vpn-setup.rsc     # –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (OVPN + WG)
‚îú‚îÄ‚îÄ ovpn-cleanup.rsc           # –û—á–∏—Å—Ç–∫–∞ OVPN —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ ovpn-setup.rsc             # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OpenVPN
‚îú‚îÄ‚îÄ wireguard-setup.rsc        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WireGuard
‚îú‚îÄ‚îÄ individual-scripts/        # –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ certificates.rsc      # –¢–æ–ª—å–∫–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ firewall.rsc          # –¢–æ–ª—å–∫–æ firewall –ø—Ä–∞–≤–∏–ª–∞
‚îÇ   ‚îî‚îÄ‚îÄ ip-pools.rsc          # –¢–æ–ª—å–∫–æ IP –ø—É–ª—ã
‚îî‚îÄ‚îÄ README.md                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### OpenVPN
- **–ü–æ—Ä—Ç—ã**: 80, 1194 (TCP –∏ UDP)
- **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**: RSA 2048, –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã 3600 –¥–Ω–µ–π
- **–ü–∞—Ä–æ–ª—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤**: `12345678`
- **IP –ø—É–ª**: `10.0.[third_octet].10-200`
- **–õ–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å**: `10.0.[third_octet].1`

### WireGuard
- **–ü–æ—Ä—Ç**: 58800
- **IP –∞–¥—Ä–µ—Å–∞**: `10.0.[third_octet+1].0/24`
- **Peer name**: `etalon-[system_name]`

## üîç –õ–æ–≥–∏–∫–∞ IP –∞–¥—Ä–µ—Å–æ–≤

–°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç IP –∞–¥—Ä–µ—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–µ—Ç—å–µ–≥–æ –æ–∫—Ç–µ—Ç–∞ IP –∞–¥—Ä–µ—Å–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ `ether1`:

**–ü—Ä–∏–º–µ—Ä:**
- IP –Ω–∞ ether1: `192.168.25.100/24`
- OpenVPN –ø—É–ª: `10.0.25.10-10.0.25.200`
- WireGuard —Å–µ—Ç—å: `10.0.26.0/24` (25+1)

**–ï—Å–ª–∏ —Ç—Ä–µ—Ç–∏–π –æ–∫—Ç–µ—Ç = 254:**
- WireGuard –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 253 (254-1)

## üõ†Ô∏è –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### OpenVPN —Å–µ—Ä–≤–µ—Ä—ã
1. **ovpn-server1**: TCP 1194 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)
2. **ovpn-server2**: UDP 1194 
3. **ovpn-server3**: UDP 80
4. **ovpn-server4**: TCP 80

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- TLS –≤–µ—Ä—Å–∏—è: —Ç–æ–ª—å–∫–æ 1.2
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: SHA256, SHA512
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ: AES128-CBC, AES128-GCM
- –¢—Ä–µ–±—É–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

## üìù –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –≤—ã–≤–æ–¥—è—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
- –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∏ —É–¥–∞–ª–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
- –°–æ–∑–¥–∞–≤–∞–µ–º—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø—Ä–∞–≤–∏–ª–∞ firewall
- –§–∏–Ω–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è**: –°–¥–µ–ª–∞–π—Ç–µ backup –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
2. **–û—á–∏—Å—Ç–∫–∞**: –°–∫—Ä–∏–ø—Ç—ã —É–¥–∞–ª—è—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ OVPN —Å–µ—Ä–≤–µ—Ä—ã –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
3. **Firewall**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª–∞ –≤ –ø–æ–∑–∏—Ü–∏—é 5
4. **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**: –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ `/file` —Å –ø–∞—Ä–æ–ª–µ–º `111111111`

## üîß –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –Ω–∞—á–∞–ª–µ —Å–∫—Ä–∏–ø—Ç–æ–≤:
- `keyPassword` - –ø–∞—Ä–æ–ª—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- `iface` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IP (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ether1)
- –ü–æ—Ä—Ç—ã, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞—Ö

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### OVPN —Å–µ—Ä–≤–µ—Ä—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä—É—á–Ω—É—é –æ—á–∏—Å—Ç–∫—É:
```bash
/system script run cleanup-ovpn-servers
```

### –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ —Å–∫—Ä–∏–ø—Ç–∞ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤.

### WireGuard peer —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –∏–º—è:
```bash
/system identity print
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –∏ –Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. Push –≤ branch
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- Issues: [GitHub Issues](https://github.com/Yarik-Poyaskov/mikrotik-vpn-setup-script/issues)

---

**‚≠ê –ü–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–ª–µ–∑–µ–Ω!**